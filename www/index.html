<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fun Learning Game for Kids!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Arial Rounded MT Bold', cursive, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 30px;
            padding: 40px;
            max-width: 900px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #ff6b6b;
            font-size: 3em;
            margin-bottom: 30px;
            text-shadow: 3px 3px 0 #ffd93d;
        }

        .game-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .game-btn {
            padding: 30px;
            font-size: 1.5em;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .game-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .game-btn:active {
            transform: scale(0.98);
        }

        .color-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .number-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .letter-btn {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .shape-btn {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
        }

        .math-btn {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        .abc-btn {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .game-area {
            display: none;
            min-height: 400px;
        }

        .game-area.active {
            display: block;
        }

        .back-btn {
            padding: 15px 30px;
            font-size: 1.2em;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            margin-bottom: 20px;
            font-weight: bold;
            transition: transform 0.2s;
        }

        .back-btn:hover {
            transform: scale(1.05);
        }

        /* Color Game */
        .color-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .color-box {
            aspect-ratio: 1;
            border-radius: 20px;
            cursor: pointer;
            transition: transform 0.2s;
            border: 5px solid transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .color-box:hover {
            transform: scale(1.1);
            border-color: white;
        }

        /* Number Game */
        .number-display {
            text-align: center;
            margin: 30px 0;
        }

        .number-display h2 {
            font-size: 3em;
            color: #4facfe;
            margin-bottom: 20px;
        }

        .objects-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
        }

        .object {
            font-size: 4em;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .number-buttons {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        .number-btn-choice {
            padding: 30px;
            font-size: 2em;
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            color: #2d3436;
            transition: transform 0.2s;
        }

        .number-btn-choice:hover {
            transform: scale(1.1);
        }

        .number-btn-choice.correct {
            background: linear-gradient(135deg, #55efc4 0%, #00b894 100%);
            animation: pulse 0.5s;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* Letter Game */
        .letter-display {
            text-align: center;
            margin: 30px 0;
        }

        .letter-card {
            display: inline-block;
            padding: 40px 60px;
            background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
            border-radius: 20px;
            margin: 20px 0;
        }

        .letter-card h2 {
            font-size: 5em;
            color: white;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
        }

        .letter-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            max-width: 700px;
            margin: 30px auto;
        }

        .letter-btn-choice {
            padding: 25px;
            font-size: 2em;
            background: linear-gradient(135deg, #fab1a0 0%, #ff7675 100%);
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            transition: transform 0.2s;
        }

        .letter-btn-choice:hover {
            transform: scale(1.1);
        }

        .letter-btn-choice.correct {
            background: linear-gradient(135deg, #55efc4 0%, #00b894 100%);
            animation: pulse 0.5s;
        }

        /* Shape Game */
        .shape-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .shape-box {
            aspect-ratio: 1;
            border-radius: 20px;
            cursor: pointer;
            transition: transform 0.2s;
            border: 5px solid transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            position: relative;
        }

        .shape-box:hover {
            transform: scale(1.1);
            border-color: #ff6b6b;
        }

        .shape-box.correct {
            background: linear-gradient(135deg, #55efc4 0%, #00b894 100%);
            animation: pulse 0.5s;
        }

        .shape-visual {
            width: 80px;
            height: 80px;
            margin-bottom: 10px;
        }

        .shape-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #2d3436;
        }

        /* Math Game */
        .math-problem {
            text-align: center;
            margin: 30px 0;
        }

        .math-problem h2 {
            font-size: 4em;
            color: #e67e22;
            margin: 20px 0;
        }

        .math-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            max-width: 600px;
            margin: 30px auto;
        }

        .math-btn-choice {
            padding: 30px;
            font-size: 2em;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            color: #2d3436;
            transition: transform 0.2s;
        }

        .math-btn-choice:hover {
            transform: scale(1.1);
        }

        .math-btn-choice.correct {
            background: linear-gradient(135deg, #55efc4 0%, #00b894 100%);
            animation: pulse 0.5s;
        }

        /* ABC Video */
        .abc-video-container {
            text-align: center;
            margin: 30px 0;
        }

        .abc-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 30px;
            padding: 60px;
            margin: 30px auto;
            max-width: 600px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .abc-letter {
            font-size: 8em;
            color: white;
            font-weight: bold;
            text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.3);
            animation: letterPop 0.5s ease;
            margin: 20px 0;
        }

        @keyframes letterPop {
            0% { transform: scale(0) rotate(-180deg); opacity: 0; }
            50% { transform: scale(1.2) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .abc-word {
            font-size: 2.5em;
            color: #ffd93d;
            font-weight: bold;
            margin: 15px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .abc-emoji {
            font-size: 5em;
            animation: emojiFloat 2s ease-in-out infinite;
            margin: 20px 0;
        }

        @keyframes emojiFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .abc-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .abc-control-btn {
            padding: 20px 40px;
            font-size: 1.5em;
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            color: #2d3436;
            transition: transform 0.2s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .abc-control-btn:hover {
            transform: scale(1.1);
        }

        .abc-control-btn:active {
            transform: scale(0.95);
        }

        .abc-control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .abc-progress {
            margin: 20px 0;
            font-size: 1.5em;
            color: #2d3436;
            font-weight: bold;
        }

        .feedback {
            text-align: center;
            font-size: 2em;
            margin: 20px 0;
            min-height: 50px;
            color: #2d3436;
            font-weight: bold;
        }

        /* Difficulty Selector */
        .difficulty-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .difficulty-btn {
            padding: 15px 30px;
            font-size: 1.2em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .difficulty-btn:hover {
            transform: scale(1.05);
        }

        .difficulty-btn.easy {
            background: linear-gradient(135deg, #55efc4 0%, #00b894 100%);
            color: white;
        }

        .difficulty-btn.medium {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            color: #2d3436;
        }

        .difficulty-btn.hard {
            background: linear-gradient(135deg, #fab1a0 0%, #e17055 100%);
            color: white;
        }

        .difficulty-btn.selected {
            box-shadow: 0 0 0 4px #6c5ce7;
            transform: scale(1.08);
        }

        /* Scoreboard & Timer */
        .game-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
            font-weight: bold;
            font-size: 1.3em;
        }

        .score-display {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timer-display {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timer-display.warning {
            color: #ffeaa7;
            animation: timerPulse 0.5s ease infinite;
        }

        .timer-display.danger {
            color: #ff7675;
            animation: timerPulse 0.3s ease infinite;
        }

        @keyframes timerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Win/Lose Popup */
        .popup-win {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
        }

        .popup-lose {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
        }

        .popup-win h2, .popup-lose h2 {
            color: white;
        }

        .popup-win p, .popup-lose p {
            color: white;
        }

        .play-again-btn {
            margin-top: 20px;
            padding: 15px 30px;
            font-size: 1.2em;
            background: white;
            color: #2d3436;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
        }

        .play-again-btn:hover {
            transform: scale(1.05);
        }

        .celebration {
            font-size: 3em;
            animation: celebrate 1s ease;
        }

        @keyframes celebrate {
            0% { transform: scale(0) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }

        /* Instruction text */
        .instruction {
            text-align: center;
            font-size: 1.8em;
            color: #6c5ce7;
            margin: 15px 0;
            padding: 15px;
            background: linear-gradient(135deg, #fff9c4 0%, #fff59d 100%);
            border-radius: 15px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* Popup Modal */
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .popup-overlay.show {
            display: flex;
        }

        .popup {
            background: white;
            border-radius: 30px;
            padding: 40px;
            text-align: center;
            max-width: 350px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: popIn 0.4s ease;
        }

        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .popup-success {
            background: linear-gradient(135deg, #55efc4 0%, #00b894 100%);
        }

        .popup-error {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
        }

        .popup h2 {
            font-size: 2.5em;
            margin: 10px 0;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .popup-error h2 {
            color: #2d3436;
        }

        .popup .emoji {
            font-size: 4em;
            margin: 15px 0;
        }

        .popup p {
            font-size: 1.3em;
            color: white;
            margin: 10px 0;
        }

        .popup-error p {
            color: #2d3436;
        }

        /* Confetti */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
            overflow: hidden;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
        }

        @keyframes confettiFall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        @media (max-width: 600px) {
            .difficulty-selector {
                gap: 8px;
            }

            .difficulty-btn {
                padding: 12px 18px;
                font-size: 1em;
            }

            .game-stats {
                padding: 10px 15px;
                font-size: 1.1em;
                flex-wrap: wrap;
                gap: 10px;
            }

            .play-again-btn {
                padding: 12px 24px;
                font-size: 1em;
            }

            h1 {
                font-size: 1.6em;
                margin-bottom: 15px;
            }

            .container {
                padding: 15px;
                border-radius: 20px;
                max-width: calc(100vw - 20px);
                overflow-x: hidden;
            }

            .game-selector {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .game-btn {
                padding: 18px 10px;
                font-size: 1em;
            }

            .object {
                font-size: 2.5em;
            }

            .number-buttons {
                grid-template-columns: repeat(5, 1fr);
                gap: 8px;
                max-width: 100%;
                padding: 0 5px;
            }

            .number-btn-choice {
                padding: 15px 8px;
                font-size: 1.4em;
            }

            .letter-buttons {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
                max-width: 100%;
                padding: 0 5px;
            }

            .letter-btn-choice {
                padding: 15px 10px;
                font-size: 1.4em;
            }

            .letter-card {
                padding: 20px 35px;
            }

            .letter-card h2 {
                font-size: 3em;
            }

            .color-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .color-box {
                font-size: 1.1em;
                min-height: 90px;
            }

            .shape-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .shape-box {
                padding: 10px;
            }

            .shape-visual {
                width: 50px;
                height: 50px;
            }

            .shape-name {
                font-size: 0.9em;
            }

            .math-buttons {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
                max-width: 100%;
                padding: 0 5px;
            }

            .math-btn-choice {
                padding: 18px 10px;
                font-size: 1.4em;
            }

            .math-problem h2 {
                font-size: 2.2em;
            }

            .number-display h2 {
                font-size: 1.8em;
            }

            .abc-display {
                padding: 25px 15px;
                margin: 15px auto;
            }

            .abc-letter {
                font-size: 4em;
                margin: 10px 0;
            }

            .abc-word {
                font-size: 1.5em;
            }

            .abc-emoji {
                font-size: 3em;
            }

            .abc-controls {
                flex-direction: column;
                gap: 10px;
                padding: 0 10px;
            }

            .abc-control-btn {
                padding: 12px 20px;
                font-size: 1.1em;
                width: 100%;
            }

            .abc-progress {
                font-size: 1.2em;
            }

            .back-btn {
                padding: 10px 18px;
                font-size: 1em;
            }

            .feedback {
                font-size: 1.3em;
            }
        }

        @media (max-width: 380px) {
            .game-btn {
                padding: 15px 8px;
                font-size: 0.9em;
            }

            .number-btn-choice,
            .letter-btn-choice,
            .math-btn-choice {
                padding: 12px 6px;
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåà Fun Learning! üé®</h1>

        <!-- Game Selection Menu -->
        <div id="menu" class="game-selector">
            <button class="game-btn color-btn" onclick="startGame('colors')">
                üé® Colors
            </button>
            <button class="game-btn number-btn" onclick="startGame('numbers')">
                üî¢ Numbers
            </button>
            <button class="game-btn letter-btn" onclick="startGame('letters')">
                üî§ Letters
            </button>
            <button class="game-btn shape-btn" onclick="startGame('shapes')">
                ‚≠ê Shapes
            </button>
            <button class="game-btn math-btn" onclick="startGame('math')">
                ‚ûï Math
            </button>
            <button class="game-btn abc-btn" onclick="startGame('abc')">
                üéµ ABC Song
            </button>
        </div>

        <!-- Color Game -->
        <div id="color-game" class="game-area">
            <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            <div class="difficulty-selector" id="color-difficulty">
                <button class="difficulty-btn easy" onclick="setDifficulty('color', 'easy')">Easy</button>
                <button class="difficulty-btn medium" onclick="setDifficulty('color', 'medium')">Medium</button>
                <button class="difficulty-btn hard" onclick="setDifficulty('color', 'hard')">Hard</button>
            </div>
            <div class="game-stats" id="color-stats" style="display: none;">
                <div class="score-display">‚≠ê Score: <span id="color-score">0</span> / <span id="color-target">5</span></div>
                <div class="timer-display" id="color-timer-container">‚è±Ô∏è <span id="color-timer">60</span>s</div>
            </div>
            <div class="feedback" id="color-feedback"></div>
            <div class="color-grid" id="color-grid"></div>
        </div>

        <!-- Number Game -->
        <div id="number-game" class="game-area">
            <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            <div class="difficulty-selector" id="number-difficulty">
                <button class="difficulty-btn easy" onclick="setDifficulty('number', 'easy')">Easy</button>
                <button class="difficulty-btn medium" onclick="setDifficulty('number', 'medium')">Medium</button>
                <button class="difficulty-btn hard" onclick="setDifficulty('number', 'hard')">Hard</button>
            </div>
            <div class="game-stats" id="number-stats" style="display: none;">
                <div class="score-display">‚≠ê Score: <span id="number-score">0</span> / <span id="number-target">5</span></div>
                <div class="timer-display" id="number-timer-container">‚è±Ô∏è <span id="number-timer">60</span>s</div>
            </div>
            <div class="feedback" id="number-feedback"></div>
            <div class="number-display">
                <h2>How many do you see?</h2>
                <div class="objects-container" id="objects-container"></div>
            </div>
            <div class="number-buttons" id="number-buttons"></div>
        </div>

        <!-- Letter Game -->
        <div id="letter-game" class="game-area">
            <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            <div class="difficulty-selector" id="letter-difficulty">
                <button class="difficulty-btn easy" onclick="setDifficulty('letter', 'easy')">Easy</button>
                <button class="difficulty-btn medium" onclick="setDifficulty('letter', 'medium')">Medium</button>
                <button class="difficulty-btn hard" onclick="setDifficulty('letter', 'hard')">Hard</button>
            </div>
            <div class="game-stats" id="letter-stats" style="display: none;">
                <div class="score-display">‚≠ê Score: <span id="letter-score">0</span> / <span id="letter-target">5</span></div>
                <div class="timer-display" id="letter-timer-container">‚è±Ô∏è <span id="letter-timer">60</span>s</div>
            </div>
            <div class="feedback" id="letter-feedback"></div>
            <div class="letter-display">
                <h2>Find the letter:</h2>
                <div class="letter-card">
                    <h2 id="target-letter">A</h2>
                </div>
            </div>
            <div class="letter-buttons" id="letter-buttons"></div>
        </div>

        <!-- Shape Game -->
        <div id="shape-game" class="game-area">
            <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            <div class="difficulty-selector" id="shape-difficulty">
                <button class="difficulty-btn easy" onclick="setDifficulty('shape', 'easy')">Easy</button>
                <button class="difficulty-btn medium" onclick="setDifficulty('shape', 'medium')">Medium</button>
                <button class="difficulty-btn hard" onclick="setDifficulty('shape', 'hard')">Hard</button>
            </div>
            <div class="game-stats" id="shape-stats" style="display: none;">
                <div class="score-display">‚≠ê Score: <span id="shape-score">0</span> / <span id="shape-target">5</span></div>
                <div class="timer-display" id="shape-timer-container">‚è±Ô∏è <span id="shape-timer">60</span>s</div>
            </div>
            <div class="feedback" id="shape-feedback"></div>
            <div class="shape-grid" id="shape-grid"></div>
        </div>

        <!-- Math Game -->
        <div id="math-game" class="game-area">
            <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            <div class="difficulty-selector" id="math-difficulty">
                <button class="difficulty-btn easy" onclick="setDifficulty('math', 'easy')">Easy</button>
                <button class="difficulty-btn medium" onclick="setDifficulty('math', 'medium')">Medium</button>
                <button class="difficulty-btn hard" onclick="setDifficulty('math', 'hard')">Hard</button>
            </div>
            <div class="game-stats" id="math-stats" style="display: none;">
                <div class="score-display">‚≠ê Score: <span id="math-score">0</span> / <span id="math-target">5</span></div>
                <div class="timer-display" id="math-timer-container">‚è±Ô∏è <span id="math-timer">60</span>s</div>
            </div>
            <div class="feedback" id="math-feedback"></div>
            <div class="math-problem">
                <h2 id="math-question">2 + 1 = ?</h2>
            </div>
            <div class="math-buttons" id="math-buttons"></div>
        </div>

        <!-- ABC Video -->
        <div id="abc-video" class="game-area">
            <button class="back-btn" onclick="backToMenu()">‚Üê Back</button>
            <div class="abc-video-container">
                <div class="abc-progress" id="abc-progress">Letter 1 of 26</div>
                <div class="abc-display">
                    <div class="abc-letter" id="abc-letter">A</div>
                    <div class="abc-word" id="abc-word">Apple</div>
                    <div class="abc-emoji" id="abc-emoji">üçé</div>
                </div>
                <div class="abc-controls">
                    <button class="abc-control-btn" id="abc-prev" onclick="previousLetter()">‚èÆ Previous</button>
                    <button class="abc-control-btn" id="abc-play" onclick="togglePlay()">‚ñ∂ Play</button>
                    <button class="abc-control-btn" id="abc-next" onclick="nextLetter()">Next ‚è≠</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup Overlays -->
    <div class="popup-overlay" id="success-popup">
        <div class="popup popup-success">
            <div class="emoji">üéâ</div>
            <h2>Hooray!</h2>
            <p>Great job!</p>
        </div>
    </div>

    <div class="popup-overlay" id="error-popup">
        <div class="popup popup-error">
            <div class="emoji">üí™</div>
            <h2>Oops!</h2>
            <p>It's okay, try again!</p>
        </div>
    </div>

    <div class="popup-overlay" id="win-popup">
        <div class="popup popup-win">
            <div class="emoji">üèÜ</div>
            <h2>You Win!</h2>
            <p id="win-message">Amazing job!</p>
            <button class="play-again-btn" onclick="playAgain()">Play Again!</button>
        </div>
    </div>

    <div class="popup-overlay" id="lose-popup">
        <div class="popup popup-lose">
            <div class="emoji">‚è∞</div>
            <h2>Time's Up!</h2>
            <p id="lose-message">Good try! You got 0/5 correct.</p>
            <button class="play-again-btn" onclick="playAgain()">Try Again!</button>
        </div>
    </div>

    <!-- Confetti Container -->
    <div class="confetti-container" id="confetti-container"></div>

    <script>
        // Audio Context for sound effects
        let soundContext = null;

        function initSoundContext() {
            if (!soundContext) {
                soundContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            return soundContext;
        }

        // Game state management
        let currentGame = null;
        let gameScore = 0;
        let gameTarget = 5;
        let gameTimer = 60;
        let timerInterval = null;
        let gameActive = false;

        // Difficulty settings: { time: seconds, target: correct answers needed }
        const difficultySettings = {
            easy: { time: 60, target: 5 },
            medium: { time: 45, target: 8 },
            hard: { time: 30, target: 10 }
        };

        // Set difficulty and start game
        function setDifficulty(game, level) {
            const settings = difficultySettings[level];
            gameScore = 0;
            gameTarget = settings.target;
            gameTimer = settings.time;
            currentGame = game;
            gameActive = true;

            // Update UI
            document.getElementById(`${game}-difficulty`).style.display = 'none';
            document.getElementById(`${game}-stats`).style.display = 'flex';
            document.getElementById(`${game}-score`).textContent = gameScore;
            document.getElementById(`${game}-target`).textContent = gameTarget;
            document.getElementById(`${game}-timer`).textContent = gameTimer;

            // Highlight selected difficulty
            document.querySelectorAll(`#${game}-difficulty .difficulty-btn`).forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');

            // Start timer
            startTimer(game);

            // Start the game
            if (game === 'color') generateColorQuestion();
            else if (game === 'number') generateNumberQuestion();
            else if (game === 'letter') generateLetterQuestion();
            else if (game === 'shape') generateShapeQuestion();
            else if (game === 'math') generateMathQuestion();
        }

        // Start countdown timer
        function startTimer(game) {
            if (timerInterval) clearInterval(timerInterval);

            timerInterval = setInterval(() => {
                gameTimer--;
                const timerEl = document.getElementById(`${game}-timer`);
                const timerContainer = document.getElementById(`${game}-timer-container`);
                timerEl.textContent = gameTimer;

                // Visual warnings
                if (gameTimer <= 10) {
                    timerContainer.className = 'timer-display danger';
                } else if (gameTimer <= 20) {
                    timerContainer.className = 'timer-display warning';
                } else {
                    timerContainer.className = 'timer-display';
                }

                // Time's up!
                if (gameTimer <= 0) {
                    clearInterval(timerInterval);
                    gameActive = false;
                    showLosePopup();
                }
            }, 1000);
        }

        // Stop timer
        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        // Update score and check for win
        function addScore() {
            gameScore++;
            document.getElementById(`${currentGame}-score`).textContent = gameScore;

            if (gameScore >= gameTarget) {
                stopTimer();
                gameActive = false;
                showWinPopup();
                return true;
            }
            return false;
        }

        // Show win popup
        function showWinPopup() {
            createConfetti();
            const popup = document.getElementById('win-popup');
            document.getElementById('win-message').textContent = `You got ${gameScore} correct in time!`;
            popup.classList.add('show');
            playWinSound();
        }

        // Show lose popup
        function showLosePopup() {
            const popup = document.getElementById('lose-popup');
            document.getElementById('lose-message').textContent = `Good try! You got ${gameScore}/${gameTarget} correct.`;
            popup.classList.add('show');
        }

        // Play again
        function playAgain() {
            document.getElementById('win-popup').classList.remove('show');
            document.getElementById('lose-popup').classList.remove('show');

            // Reset and show difficulty selector
            document.getElementById(`${currentGame}-difficulty`).style.display = 'flex';
            document.getElementById(`${currentGame}-stats`).style.display = 'none';
            document.getElementById(`${currentGame}-timer-container`).className = 'timer-display';
        }

        // Play win sound (fanfare)
        function playWinSound() {
            const ctx = initSoundContext();
            const now = ctx.currentTime;
            const notes = [523.25, 659.25, 783.99, 1046.50, 1318.51, 1567.98];

            notes.forEach((freq, i) => {
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.connect(gain);
                gain.connect(ctx.destination);
                osc.frequency.value = freq;
                osc.type = 'triangle';
                gain.gain.setValueAtTime(0, now + i * 0.1);
                gain.gain.linearRampToValueAtTime(0.3, now + i * 0.1 + 0.05);
                gain.gain.exponentialRampToValueAtTime(0.01, now + i * 0.1 + 0.4);
                osc.start(now + i * 0.1);
                osc.stop(now + i * 0.1 + 0.5);
            });
        }

        // Speak with kid-like voice (higher pitch)
        function speakKidVoice(text) {
            if ('speechSynthesis' in window) {
                // Cancel any ongoing speech
                speechSynthesis.cancel();

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 1.1; // Slightly faster
                utterance.pitch = 1.8; // Higher pitch for kid voice
                utterance.volume = 1;

                // Try to find a child-friendly voice
                const voices = speechSynthesis.getVoices();
                const childVoice = voices.find(voice =>
                    voice.name.toLowerCase().includes('zira') ||
                    voice.name.toLowerCase().includes('samantha') ||
                    voice.name.toLowerCase().includes('karen') ||
                    voice.name.toLowerCase().includes('female') ||
                    voice.lang.includes('en')
                );

                if (childVoice) {
                    utterance.voice = childVoice;
                }

                speechSynthesis.speak(utterance);
            }
        }

        // Play success sound (happy chime + kids saying "Yay!")
        function playSuccessSound() {
            const ctx = initSoundContext();
            const now = ctx.currentTime;

            // Play a happy ascending chord
            const notes = [523.25, 659.25, 783.99, 1046.50]; // C5, E5, G5, C6

            notes.forEach((freq, i) => {
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();

                osc.connect(gain);
                gain.connect(ctx.destination);

                osc.frequency.value = freq;
                osc.type = 'sine';

                gain.gain.setValueAtTime(0, now + i * 0.08);
                gain.gain.linearRampToValueAtTime(0.25, now + i * 0.08 + 0.05);
                gain.gain.exponentialRampToValueAtTime(0.01, now + i * 0.08 + 0.3);

                osc.start(now + i * 0.08);
                osc.stop(now + i * 0.08 + 0.4);
            });
        }

        // Play error sound (gentle tone)
        function playErrorSound() {
            const ctx = initSoundContext();
            const now = ctx.currentTime;

            // Gentle encouraging tone
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();

            osc.connect(gain);
            gain.connect(ctx.destination);

            osc.frequency.setValueAtTime(350, now);
            osc.frequency.linearRampToValueAtTime(300, now + 0.2);
            osc.type = 'sine';

            gain.gain.setValueAtTime(0.2, now);
            gain.gain.exponentialRampToValueAtTime(0.01, now + 0.25);

            osc.start(now);
            osc.stop(now + 0.3);
        }

        // Text-to-Speech function
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.8;
                utterance.pitch = 1.2;
                utterance.volume = 1;

                // Select a female voice
                const voices = speechSynthesis.getVoices();
                const femaleVoice = voices.find(voice =>
                    voice.name.toLowerCase().includes('female') ||
                    voice.name.toLowerCase().includes('zira') ||
                    voice.name.toLowerCase().includes('samantha') ||
                    voice.name.toLowerCase().includes('victoria') ||
                    voice.name.toLowerCase().includes('karen') ||
                    voice.name.toLowerCase().includes('moira') ||
                    voice.name.toLowerCase().includes('fiona') ||
                    voice.name.toLowerCase().includes('google us english') && voice.name.toLowerCase().includes('female')
                );

                if (femaleVoice) {
                    utterance.voice = femaleVoice;
                }

                speechSynthesis.speak(utterance);
            }
        }

        // Show success popup with confetti
        function showSuccessPopup() {
            createConfetti();
            const popup = document.getElementById('success-popup');
            popup.classList.add('show');
            playSuccessSound();
            setTimeout(() => {
                popup.classList.remove('show');
            }, 700);
        }

        // Show error popup
        function showErrorPopup() {
            const popup = document.getElementById('error-popup');
            popup.classList.add('show');
            playErrorSound();
            setTimeout(() => {
                popup.classList.remove('show');
            }, 600);
        }

        // Create confetti animation
        function createConfetti() {
            const container = document.getElementById('confetti-container');
            container.innerHTML = '';
            const colors = ['#ff6b6b', '#4ecdc4', '#ffe66d', '#a8e6cf', '#ff6b9d', '#c7ceea', '#ffd93d', '#6c5ce7'];

            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = (Math.random() * 10 + 5) + 'px';
                confetti.style.height = (Math.random() * 10 + 5) + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.animation = `confettiFall ${Math.random() * 2 + 1.5}s ease-out forwards`;
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                container.appendChild(confetti);
            }

            // Clean up confetti after animation
            setTimeout(() => {
                container.innerHTML = '';
            }, 3000);
        }

        // Show instruction text
        function showInstruction(elementId, text) {
            const feedback = document.getElementById(elementId);
            feedback.textContent = text;
            feedback.className = 'feedback instruction';
        }

        // Game navigation
        function startGame(gameType) {
            document.getElementById('menu').style.display = 'none';
            document.getElementById('color-game').classList.remove('active');
            document.getElementById('number-game').classList.remove('active');
            document.getElementById('letter-game').classList.remove('active');
            document.getElementById('shape-game').classList.remove('active');
            document.getElementById('math-game').classList.remove('active');
            document.getElementById('abc-video').classList.remove('active');

            if (gameType === 'colors') {
                document.getElementById('color-game').classList.add('active');
                initColorGame();
            } else if (gameType === 'numbers') {
                document.getElementById('number-game').classList.add('active');
                initNumberGame();
            } else if (gameType === 'letters') {
                document.getElementById('letter-game').classList.add('active');
                initLetterGame();
            } else if (gameType === 'shapes') {
                document.getElementById('shape-game').classList.add('active');
                initShapeGame();
            } else if (gameType === 'math') {
                document.getElementById('math-game').classList.add('active');
                initMathGame();
            } else if (gameType === 'abc') {
                document.getElementById('abc-video').classList.add('active');
                initABCVideo();
            }
        }

        function backToMenu() {
            // Stop any active game
            stopTimer();
            gameActive = false;

            document.getElementById('menu').style.display = 'grid';
            document.getElementById('color-game').classList.remove('active');
            document.getElementById('number-game').classList.remove('active');
            document.getElementById('letter-game').classList.remove('active');
            document.getElementById('shape-game').classList.remove('active');
            document.getElementById('math-game').classList.remove('active');
            document.getElementById('abc-video').classList.remove('active');

            // Reset difficulty selectors and hide stats
            ['color', 'number', 'letter', 'shape', 'math'].forEach(game => {
                document.getElementById(`${game}-difficulty`).style.display = 'flex';
                document.getElementById(`${game}-stats`).style.display = 'none';
                document.getElementById(`${game}-timer-container`).className = 'timer-display';
            });

            // Stop ABC video if it's playing
            if (abcInterval) {
                clearInterval(abcInterval);
                abcInterval = null;
            }
            if (isPlaying) {
                isPlaying = false;
                stopABCSong();
            }
        }

        // COLOR GAME
        const colors = [
            { name: 'Red', value: '#e74c3c' },
            { name: 'Blue', value: '#3498db' },
            { name: 'Yellow', value: '#f1c40f' },
            { name: 'Green', value: '#2ecc71' },
            { name: 'Orange', value: '#e67e22' },
            { name: 'Purple', value: '#9b59b6' },
            { name: 'Pink', value: '#fd79a8' },
            { name: 'Brown', value: '#8b4513' }
        ];

        let targetColor = null;

        function initColorGame() {
            // Show difficulty selector - game starts when user selects difficulty
            document.getElementById('color-grid').innerHTML = '';
            document.getElementById('color-feedback').textContent = 'Select a difficulty to start!';
            document.getElementById('color-feedback').className = 'feedback instruction';
        }

        function generateColorQuestion() {
            // Pick a random target color
            targetColor = colors[Math.floor(Math.random() * colors.length)];

            // Select 6 random colors including the target
            const selectedColors = [targetColor];
            while (selectedColors.length < 6) {
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                if (!selectedColors.find(c => c.name === randomColor.name)) {
                    selectedColors.push(randomColor);
                }
            }

            // Shuffle the colors
            selectedColors.sort(() => Math.random() - 0.5);

            const grid = document.getElementById('color-grid');
            grid.innerHTML = '';

            selectedColors.forEach(color => {
                const box = document.createElement('div');
                box.className = 'color-box';
                box.style.backgroundColor = color.value;
                box.textContent = color.name;
                box.onclick = () => checkColorAnswer(color.name, box);
                grid.appendChild(box);
            });

            showInstruction('color-feedback', `Choose the color ${targetColor.name}!`);
        }

        function checkColorAnswer(answer, box) {
            if (!gameActive) return;

            if (answer === targetColor.name) {
                box.classList.add('correct');
                const won = addScore();
                if (!won) {
                    showSuccessPopup();
                    setTimeout(() => {
                        box.classList.remove('correct');
                        if (gameActive) generateColorQuestion();
                    }, 800);
                }
            } else {
                showErrorPopup();
            }
        }

        // NUMBER GAME
        const emojis = ['üê∂', 'üê±', 'ü¶ä', 'üêª', 'üêº', 'üê®', 'üê∏', 'ü¶Å', 'üêØ', 'üêÆ'];
        let currentNumber = 0;
        let currentEmoji = '';

        function initNumberGame() {
            document.getElementById('objects-container').innerHTML = '';
            document.getElementById('number-buttons').innerHTML = '';
            document.getElementById('number-feedback').textContent = 'Select a difficulty to start!';
            document.getElementById('number-feedback').className = 'feedback instruction';
        }

        function generateNumberQuestion() {
            currentNumber = Math.floor(Math.random() * 5) + 1; // 1-5
            currentEmoji = emojis[Math.floor(Math.random() * emojis.length)];

            const container = document.getElementById('objects-container');
            container.innerHTML = '';

            for (let i = 0; i < currentNumber; i++) {
                const obj = document.createElement('div');
                obj.className = 'object';
                obj.textContent = currentEmoji;
                obj.style.animationDelay = `${i * 0.1}s`;
                container.appendChild(obj);
            }

            const buttonsContainer = document.getElementById('number-buttons');
            buttonsContainer.innerHTML = '';

            for (let i = 1; i <= 5; i++) {
                const btn = document.createElement('button');
                btn.className = 'number-btn-choice';
                btn.textContent = i;
                btn.onclick = () => checkNumberAnswer(i, btn);
                buttonsContainer.appendChild(btn);
            }

            showInstruction('number-feedback', `How many do you see? Count them!`);
        }

        function checkNumberAnswer(answer, button) {
            if (!gameActive) return;

            if (answer === currentNumber) {
                button.classList.add('correct');
                const won = addScore();
                if (!won) {
                    showSuccessPopup();
                    setTimeout(() => {
                        if (gameActive) generateNumberQuestion();
                    }, 800);
                }
            } else {
                showErrorPopup();
            }
        }

        // LETTER GAME
        const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        let targetLetter = '';

        function initLetterGame() {
            document.getElementById('letter-buttons').innerHTML = '';
            document.getElementById('target-letter').textContent = '?';
            document.getElementById('letter-feedback').textContent = 'Select a difficulty to start!';
            document.getElementById('letter-feedback').className = 'feedback instruction';
        }

        function generateLetterQuestion() {
            targetLetter = letters[Math.floor(Math.random() * letters.length)];
            document.getElementById('target-letter').textContent = targetLetter;

            const options = [targetLetter];
            while (options.length < 6) {
                const randomLetter = letters[Math.floor(Math.random() * letters.length)];
                if (!options.includes(randomLetter)) {
                    options.push(randomLetter);
                }
            }

            // Shuffle options
            options.sort(() => Math.random() - 0.5);

            const buttonsContainer = document.getElementById('letter-buttons');
            buttonsContainer.innerHTML = '';

            options.forEach(letter => {
                const btn = document.createElement('button');
                btn.className = 'letter-btn-choice';
                btn.textContent = letter;
                btn.onclick = () => checkLetterAnswer(letter, btn);
                buttonsContainer.appendChild(btn);
            });

            showInstruction('letter-feedback', `Find the letter ${targetLetter}!`);
        }

        function checkLetterAnswer(answer, button) {
            if (!gameActive) return;

            if (answer === targetLetter) {
                button.classList.add('correct');
                const won = addScore();
                if (!won) {
                    showSuccessPopup();
                    setTimeout(() => {
                        if (gameActive) generateLetterQuestion();
                    }, 800);
                }
            } else {
                showErrorPopup();
            }
        }

        // SHAPE GAME
        const shapes = [
            { name: 'Circle', svg: '<circle cx="40" cy="40" r="35" fill="#ff6b6b"/>' },
            { name: 'Square', svg: '<rect x="10" y="10" width="60" height="60" fill="#4ecdc4"/>' },
            { name: 'Triangle', svg: '<polygon points="40,10 70,60 10,60" fill="#ffe66d"/>' },
            { name: 'Star', svg: '<polygon points="40,5 48,30 75,30 53,45 60,70 40,55 20,70 27,45 5,30 32,30" fill="#a8e6cf"/>' },
            { name: 'Heart', svg: '<path d="M40,70 C40,70 10,50 10,35 C10,25 15,20 22,20 C30,20 35,25 40,32 C45,25 50,20 58,20 C65,20 70,25 70,35 C70,50 40,70 40,70 Z" fill="#ff6b9d"/>' },
            { name: 'Diamond', svg: '<polygon points="40,10 70,40 40,70 10,40" fill="#c7ceea"/>' }
        ];

        let targetShape = null;

        function initShapeGame() {
            document.getElementById('shape-grid').innerHTML = '';
            document.getElementById('shape-feedback').textContent = 'Select a difficulty to start!';
            document.getElementById('shape-feedback').className = 'feedback instruction';
        }

        function generateShapeQuestion() {
            targetShape = shapes[Math.floor(Math.random() * shapes.length)];

            const grid = document.getElementById('shape-grid');
            grid.innerHTML = '';

            shapes.forEach(shape => {
                const box = document.createElement('div');
                box.className = 'shape-box';

                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.setAttribute('class', 'shape-visual');
                svg.setAttribute('viewBox', '0 0 80 80');
                svg.innerHTML = shape.svg;

                const nameDiv = document.createElement('div');
                nameDiv.className = 'shape-name';
                nameDiv.textContent = shape.name;

                box.appendChild(svg);
                box.appendChild(nameDiv);
                box.onclick = () => checkShapeAnswer(shape.name, box);
                grid.appendChild(box);
            });

            showInstruction('shape-feedback', `Find the ${targetShape.name}!`);
        }

        function checkShapeAnswer(answer, box) {
            if (!gameActive) return;

            if (answer === targetShape.name) {
                box.classList.add('correct');
                const won = addScore();
                if (!won) {
                    showSuccessPopup();
                    setTimeout(() => {
                        box.classList.remove('correct');
                        if (gameActive) generateShapeQuestion();
                    }, 800);
                }
            } else {
                showErrorPopup();
            }
        }

        // MATH GAME
        let num1 = 0;
        let num2 = 0;
        let correctAnswer = 0;
        let mathOperation = '+';

        function initMathGame() {
            document.getElementById('math-buttons').innerHTML = '';
            document.getElementById('math-question').textContent = '? + ? = ?';
            document.getElementById('math-feedback').textContent = 'Select a difficulty to start!';
            document.getElementById('math-feedback').className = 'feedback instruction';
        }

        function generateMathQuestion() {
            // Simple addition and subtraction for ages 1-5
            const useAddition = Math.random() > 0.3; // 70% addition, 30% subtraction

            if (useAddition) {
                num1 = Math.floor(Math.random() * 5) + 1; // 1-5
                num2 = Math.floor(Math.random() * 5) + 1; // 1-5
                mathOperation = '+';
                correctAnswer = num1 + num2;
            } else {
                // For subtraction, ensure result is positive
                num1 = Math.floor(Math.random() * 5) + 3; // 3-7
                num2 = Math.floor(Math.random() * num1) + 1; // 1 to num1
                mathOperation = '-';
                correctAnswer = num1 - num2;
            }

            document.getElementById('math-question').textContent = `${num1} ${mathOperation} ${num2} = ?`;

            // Generate answer options
            const options = [correctAnswer];
            while (options.length < 6) {
                const wrongAnswer = Math.floor(Math.random() * 10) + 1;
                if (!options.includes(wrongAnswer) && wrongAnswer !== correctAnswer) {
                    options.push(wrongAnswer);
                }
            }

            // Shuffle options
            options.sort(() => Math.random() - 0.5);

            const buttonsContainer = document.getElementById('math-buttons');
            buttonsContainer.innerHTML = '';

            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'math-btn-choice';
                btn.textContent = option;
                btn.onclick = () => checkMathAnswer(option, btn);
                buttonsContainer.appendChild(btn);
            });

            showInstruction('math-feedback', `What is ${num1} ${mathOperation} ${num2}?`);
        }

        function checkMathAnswer(answer, button) {
            if (!gameActive) return;

            if (answer === correctAnswer) {
                button.classList.add('correct');
                const won = addScore();
                if (!won) {
                    showSuccessPopup();
                    setTimeout(() => {
                        if (gameActive) generateMathQuestion();
                    }, 800);
                }
            } else {
                showErrorPopup();
            }
        }

        // ABC VIDEO
        const abcData = [
            { letter: 'A', word: 'Apple', emoji: 'üçé' },
            { letter: 'B', word: 'Ball', emoji: '‚öΩ' },
            { letter: 'C', word: 'Cat', emoji: 'üê±' },
            { letter: 'D', word: 'Dog', emoji: 'üê∂' },
            { letter: 'E', word: 'Elephant', emoji: 'üêò' },
            { letter: 'F', word: 'Fish', emoji: 'üê†' },
            { letter: 'G', word: 'Grapes', emoji: 'üçá' },
            { letter: 'H', word: 'House', emoji: 'üè†' },
            { letter: 'I', word: 'Ice Cream', emoji: 'üç¶' },
            { letter: 'J', word: 'Jump', emoji: 'ü§∏' },
            { letter: 'K', word: 'Kite', emoji: 'ü™Å' },
            { letter: 'L', word: 'Lion', emoji: 'ü¶Å' },
            { letter: 'M', word: 'Monkey', emoji: 'üêµ' },
            { letter: 'N', word: 'Nest', emoji: 'ü™∫' },
            { letter: 'O', word: 'Orange', emoji: 'üçä' },
            { letter: 'P', word: 'Pizza', emoji: 'üçï' },
            { letter: 'Q', word: 'Queen', emoji: 'üë∏' },
            { letter: 'R', word: 'Rainbow', emoji: 'üåà' },
            { letter: 'S', word: 'Sun', emoji: '‚òÄÔ∏è' },
            { letter: 'T', word: 'Tree', emoji: 'üå≥' },
            { letter: 'U', word: 'Umbrella', emoji: '‚òÇÔ∏è' },
            { letter: 'V', word: 'Volcano', emoji: 'üåã' },
            { letter: 'W', word: 'Watermelon', emoji: 'üçâ' },
            { letter: 'X', word: 'Xylophone', emoji: 'üéµ' },
            { letter: 'Y', word: 'Yo-yo', emoji: 'ü™Ä' },
            { letter: 'Z', word: 'Zebra', emoji: 'ü¶ì' }
        ];

        let currentLetterIndex = 0;
        let isPlaying = false;
        let abcInterval = null;
        let audioContext = null;
        let musicInterval = null;

        // ABC Song melody and lyrics timing
        const abcSong = [
            { note: 261.63, duration: 0.5, lyric: 'A' },
            { note: 261.63, duration: 0.5, lyric: 'B' },
            { note: 392.00, duration: 0.5, lyric: 'C' },
            { note: 392.00, duration: 0.5, lyric: 'D' },
            { note: 440.00, duration: 0.5, lyric: 'E' },
            { note: 440.00, duration: 0.5, lyric: 'F' },
            { note: 392.00, duration: 1.0, lyric: 'G' },
            { note: 349.23, duration: 0.5, lyric: 'H' },
            { note: 349.23, duration: 0.5, lyric: 'I' },
            { note: 329.63, duration: 0.5, lyric: 'J' },
            { note: 329.63, duration: 0.5, lyric: 'K' },
            { note: 293.66, duration: 0.5, lyric: 'L' },
            { note: 293.66, duration: 0.5, lyric: 'M' },
            { note: 261.63, duration: 0.5, lyric: 'N' },
            { note: 261.63, duration: 0.5, lyric: 'O' },
            { note: 261.63, duration: 1.0, lyric: 'P' },
            { note: 392.00, duration: 0.5, lyric: 'Q' },
            { note: 392.00, duration: 0.5, lyric: 'R' },
            { note: 349.23, duration: 0.5, lyric: 'S' },
            { note: 349.23, duration: 0.5, lyric: 'T' },
            { note: 329.63, duration: 0.5, lyric: 'U' },
            { note: 329.63, duration: 1.0, lyric: 'V' },
            { note: 293.66, duration: 1.0, lyric: 'W' },
            { note: 392.00, duration: 0.5, lyric: 'X' },
            { note: 392.00, duration: 0.5, lyric: 'Y' },
            { note: 349.23, duration: 0.5, lyric: 'and' },
            { note: 349.23, duration: 1.0, lyric: 'Z' },
            { note: 261.63, duration: 0.5, lyric: '' },
            { note: 261.63, duration: 0.5, lyric: '' },
            { note: 392.00, duration: 0.5, lyric: '' },
            { note: 392.00, duration: 0.5, lyric: '' },
            { note: 440.00, duration: 0.5, lyric: '' },
            { note: 440.00, duration: 0.5, lyric: '' },
            { note: 392.00, duration: 1.0, lyric: '' },
            { note: 349.23, duration: 0.5, lyric: '' },
            { note: 349.23, duration: 0.5, lyric: '' },
            { note: 329.63, duration: 0.5, lyric: '' },
            { note: 329.63, duration: 0.5, lyric: '' },
            { note: 293.66, duration: 0.5, lyric: '' },
            { note: 293.66, duration: 0.5, lyric: '' },
            { note: 261.63, duration: 1.5, lyric: '' }
        ];

        function playNote(frequency, duration) {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }

            const now = audioContext.currentTime;

            // Main tone (xylophone-like)
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.value = frequency;
            oscillator.type = 'triangle'; // Richer tone than sine

            gainNode.gain.setValueAtTime(0.4, now);
            gainNode.gain.exponentialRampToValueAtTime(0.01, now + duration * 0.9);

            oscillator.start(now);
            oscillator.stop(now + duration);

            // Add harmonic overtone for richer sound
            const osc2 = audioContext.createOscillator();
            const gain2 = audioContext.createGain();

            osc2.connect(gain2);
            gain2.connect(audioContext.destination);

            osc2.frequency.value = frequency * 2; // Octave higher
            osc2.type = 'sine';

            gain2.gain.setValueAtTime(0.15, now);
            gain2.gain.exponentialRampToValueAtTime(0.01, now + duration * 0.5);

            osc2.start(now);
            osc2.stop(now + duration * 0.6);

            // Add a soft bell attack
            const osc3 = audioContext.createOscillator();
            const gain3 = audioContext.createGain();

            osc3.connect(gain3);
            gain3.connect(audioContext.destination);

            osc3.frequency.value = frequency * 3;
            osc3.type = 'sine';

            gain3.gain.setValueAtTime(0.08, now);
            gain3.gain.exponentialRampToValueAtTime(0.01, now + 0.1);

            osc3.start(now);
            osc3.stop(now + 0.15);
        }

        function playABCSong() {
            let noteIndex = 0;
            let currentTime = 0;

            function playNext() {
                if (noteIndex < abcSong.length && isPlaying) {
                    const item = abcSong[noteIndex];

                    // Play the note
                    playNote(item.note, item.duration);

                    // Update visual display for letters only (no voice)
                    if (item.lyric) {
                        const letterIndex = item.lyric.charCodeAt(0) - 65; // A=0, B=1, etc.
                        if (letterIndex >= 0 && letterIndex < 26) {
                            currentLetterIndex = letterIndex;
                            const data = abcData[letterIndex];

                            const letterEl = document.getElementById('abc-letter');
                            const wordEl = document.getElementById('abc-word');
                            const emojiEl = document.getElementById('abc-emoji');

                            letterEl.style.animation = 'none';
                            setTimeout(() => {
                                letterEl.textContent = data.letter;
                                wordEl.textContent = data.word;
                                emojiEl.textContent = data.emoji;
                                letterEl.style.animation = 'letterPop 0.5s ease';
                                document.getElementById('abc-progress').textContent = `Letter ${letterIndex + 1} of 26`;
                            }, 10);
                        }
                    }

                    noteIndex++;
                    currentTime += item.duration * 1000;

                    if (noteIndex < abcSong.length) {
                        musicInterval = setTimeout(playNext, item.duration * 1000);
                    } else {
                        // Song finished
                        setTimeout(() => {
                            isPlaying = false;
                            updatePlayButton();
                        }, 1000);
                    }
                }
            }

            playNext();
        }

        function stopABCSong() {
            if (musicInterval) {
                clearTimeout(musicInterval);
                musicInterval = null;
            }
        }

        function initABCVideo() {
            currentLetterIndex = 0;
            isPlaying = false;
            if (abcInterval) {
                clearInterval(abcInterval);
                abcInterval = null;
            }
            stopABCSong();
            displayLetter(0, false);
            updatePlayButton();
        }

        function displayLetter(index, shouldSpeak = true) {
            const data = abcData[index];

            // Re-trigger animation by removing and re-adding the element
            const letterEl = document.getElementById('abc-letter');
            const wordEl = document.getElementById('abc-word');
            const emojiEl = document.getElementById('abc-emoji');

            letterEl.style.animation = 'none';
            setTimeout(() => {
                letterEl.textContent = data.letter;
                wordEl.textContent = data.word;
                emojiEl.textContent = data.emoji;
                letterEl.style.animation = 'letterPop 0.5s ease';
            }, 10);

            document.getElementById('abc-progress').textContent = `Letter ${index + 1} of 26`;

            // Update button states
            document.getElementById('abc-prev').disabled = index === 0;
            document.getElementById('abc-next').disabled = index === 25;
        }

        function nextLetter() {
            if (currentLetterIndex < 25) {
                currentLetterIndex++;
                displayLetter(currentLetterIndex);
            }
        }

        function previousLetter() {
            if (currentLetterIndex > 0) {
                currentLetterIndex--;
                displayLetter(currentLetterIndex);
            }
        }

        function togglePlay() {
            isPlaying = !isPlaying;
            updatePlayButton();

            if (isPlaying) {
                // Start the ABC song with synchronized music and voice
                playABCSong();
            } else {
                // Pause
                stopABCSong();
            }
        }

        function updatePlayButton() {
            const playBtn = document.getElementById('abc-play');
            if (isPlaying) {
                playBtn.textContent = '‚è∏ Pause';
            } else {
                playBtn.textContent = '‚ñ∂ Play';
            }
        }

        // Initial load - no voice greeting
        window.onload = () => {
            // App ready
        };
    </script>
</body>
</html>
